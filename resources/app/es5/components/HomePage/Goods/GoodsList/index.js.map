{"version":3,"sources":["components/HomePage/Goods/GoodsList/index.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,6BAA+B;AAI/B,+CAA0C;AAC1C,uCAAkC;AAClC,6CAAwC;AAYxC;IAAwB,6BAAyC;IAChE,mBAAY,KAAkB;QAA9B,YACC,kBAAM,KAAK,CAAC,SASZ;QAPA,KAAI,CAAC,KAAK,GAAG;YACZ,QAAQ,EAAE,EAAE;YACZ,MAAM,EAAE,CAAC;YACT,KAAK,EAAE,CAAC;YACR,KAAK,EAAE,KAAK;YACZ,SAAS,EAAE,KAAK;SAChB,CAAC;;IACH,CAAC;IAED,qCAAiB,GAAjB;QACC,IAAI,CAAC,WAAW,EAAE,CAAC;IACpB,CAAC;IAED,0BAAM,GAAN;QAAA,iBAgCC;QA/BA,OAAO,CACN,6BAAK,SAAS,EAAC,cAAc;YAC5B,oBAAC,qBAAW,IACX,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,EACzB,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG;YAE3B,6BAAK,SAAS,EAAC,aAAa,IAE1B,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAE,UAAC,IAAI,IAAK,OAAA,CAClC,oBAAC,kBAAQ,IAAC,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,CAAC,EAAE,GAAG,CACxC,EAFkC,CAElC,CAAC;;oBAEF,uEAA8C,CAE1C;YAGL,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;gBACtC,KAAK,CAAC,CAAC;gBACP,6BAAK,SAAS,EAAC,kBAAkB;oBAChC,gCACC,IAAI,EAAC,QAAQ,EACb,SAAS,EAAC,kBAAkB,EAC5B,OAAO,EAAE,cAAM,OAAA,KAAI,CAAC,WAAW,CAAC,KAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAAnC,CAAmC,IAEjD,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,WAAW,CAC1C,CACJ,CAEH,CACN,CAAC;IACH,CAAC;IAEK,+BAAW,GAAjB,UAAkB,MAAkB;QAAlB,uBAAA,EAAA,UAAkB;;;;;;wBACnC,IAAI,CAAC,QAAQ,CAAC;4BACb,SAAS,EAAE,IAAI;yBACf,CAAC,CAAC;wBAEQ,WAAM,aAAG,CAAC,WAAW,CAAC,MAAM,CAAC,EAAA;;wBAApC,IAAI,GAAG,SAA6B;wBAExC,IAAG,aAAG,CAAC,OAAO,CAAC,IAAI,CAAC,EAAC;4BACpB,IAAI,CAAC,QAAQ,CAAC;gCACb,KAAK,EAAE,IAAI,CAAC,QAAS,CAAC,IAAI;6BAC1B,CAAC,CAAC;yBACH;6BACG;4BACG,qBAAmB,IAAyB,CAAC;4BAEnD,IAAI,CAAC,QAAQ,CAAC,UAAC,IAAI,IAAK,OAAA,CAAC;gCACxB,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,kBAAgB,CAAC,QAAQ,CAAC;gCACzD,MAAM,EAAE,IAAI,CAAC,MAAM,GAAG,kBAAgB,CAAC,QAAQ,CAAC,MAAM;gCACtD,KAAK,EAAE,kBAAgB,CAAC,KAAK;6BAC7B,CAAC,EAJsB,CAItB,CAAC,CAAC;yBACJ;wBAED,IAAI,CAAC,QAAQ,CAAC;4BACb,SAAS,EAAE,KAAK;yBAChB,CAAC,CAAC;wBAEH,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;;;;;KAClB;IACF,gBAAC;AAAD,CA/EA,AA+EC,CA/EuB,KAAK,CAAC,SAAS,GA+EtC;AAED,kBAAe,SAAS,CAAC","file":"index.js","sourcesContent":["import * as React from 'react';\r\n\r\nimport {IProduct} from '../../../../Interfaces/IProduct';\r\nimport {IProductsResponse} from '../../../../Interfaces/Responses/IProductsResponse';\r\nimport API from '../../../../Helpers/API';\r\nimport GoodItem from './GoodItem';\r\nimport GoodsHeader from './GoodsHeader';\r\n\r\ntype IGoodsProps = {};\r\n\r\ntype IGoodsState = {\r\n\tproducts: Array<IProduct>,\r\n\tloaded: number,\r\n\ttotal: number,\r\n\tisLoading: boolean,\r\n\terror: boolean\r\n}\r\n\r\nclass GoodsList extends React.Component<IGoodsProps, IGoodsState>{\r\n\tconstructor(props: IGoodsProps){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tproducts: [],\r\n\t\t\tloaded: 0,\r\n\t\t\ttotal: 0,\r\n\t\t\terror: false,\r\n\t\t\tisLoading: false\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tthis.getProducts();\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<div className=\"goods__items\">\r\n\t\t\t\t<GoodsHeader\r\n\t\t\t\t\tloaded={this.state.loaded}\r\n\t\t\t\t\ttotal={this.state.total}/>\r\n\r\n\t\t\t\t<div className=\"goods__list\">\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.state.products.map( (item) => (\r\n\t\t\t\t\t\t\t<GoodItem product={item} key={item.id}/>\r\n\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t||\r\n\t\t\t\t\t\t<div>No products that accept this filter</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.total == this.state.loaded ?\r\n\t\t\t\t\t\tfalse :\r\n\t\t\t\t\t\t<div className=\"goods__list-load\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\tclassName=\"goods__list-more\"\r\n\t\t\t\t\t\t\t\tonClick={() => this.getProducts(this.state.loaded)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{this.state.isLoading ? 'Loading...' : 'Load More'}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tasync getProducts(offset: number = 0){\r\n\t\tthis.setState({\r\n\t\t\tisLoading: true\r\n\t\t});\r\n\r\n\t\tlet resp = await API.getProducts(offset);\r\n\r\n\t\tif(API.isError(resp)){\r\n\t\t\tthis.setState({\r\n\t\t\t\terror: resp.response!.data\r\n\t\t\t});\r\n\t\t}\r\n\t\telse{\r\n\t\t\tconst productsResponse = resp as IProductsResponse;\r\n\r\n\t\t\tthis.setState((prev) => ({\r\n\t\t\t\tproducts: prev.products.concat(productsResponse.products),\r\n\t\t\t\tloaded: prev.loaded + productsResponse.products.length,\r\n\t\t\t\ttotal: productsResponse.total\r\n\t\t\t}));\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tisLoading: false\r\n\t\t});\r\n\r\n\t\tconsole.log(resp);\r\n\t}\r\n}\r\n\r\nexport default GoodsList;\r\n"]}